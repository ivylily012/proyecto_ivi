<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jobcrafters</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <style>
     /* Estilos generales para el navbar */
   .navbar {
            background-color: #ffffff; /* Fondo blanco por defecto */
            transition: top 0.3s ease-in-out; /* Suaviza la animación del navbar */
        }

        .navbar-hidden {
            top: -80px; /* Ajusta esta altura dependiendo de la altura de tu navbar */
        }

        .navbar .nav-link, .navbar .navbar-brand, .navbar .btn-outline-dark, .dropdown-menu, .dropdown-item {
            color: #000; /* Texto oscuro por defecto */
        }

        .btn-primary {
            background-color: #7e57c2; /* Color morado para el botón de Registrarse */
            border-color: #7e57c2;
        }

        .btn-primary:hover {
            background-color: #6a4c93; /* Morado más oscuro en hover */
            border-color: #6a4c93;
        }

        .dropdown-menu {
            min-width: 250px;
            border-radius: 10px;
            background-color: #ffffff; /* Fondo blanco por defecto */
        }

        .dropdown-item:hover {
            background-color: #f0f0f0; /* Fondo gris claro en hover */
            color: #000;
        }

        .form-check-input {
            display: none; /* Oculta el checkbox predeterminado */
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 14px;
            width: 14px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #6a4c93; /* Color morado para el switch en modo oscuro */
        }

        input:checked + .slider:before {
            transform: translateX(20px); /* Ajusta según el tamaño del slider */
        }

        /* Estilos para el modo oscuro */
        .dark-mode {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        .dark-mode .navbar {
            background-color: #1e1e1e; /* Fondo oscuro para el navbar */
        }

        .dark-mode .navbar .nav-link, .dark-mode .navbar .navbar-brand, .dark-mode .navbar .btn-outline-dark, .dark-mode .dropdown-menu, .dark-mode .dropdown-item {
            color: #ffffff; /* Texto claro en modo oscuro */
        }

        .dark-mode .dropdown-menu {
            background-color: #1e1e1e; /* Fondo oscuro para el menú */
        }

        .dark-mode .dropdown-item:hover {
            background-color: #444444; /* Fondo más oscuro en hover */
            color: #ffffff;
        }

        .dark-mode .bg-light {
            background-color: #1e1e1e!important; /* Fondo oscuro para la sección */
            color: #ffffff; /* Texto blanco en modo oscuro */
        }

        .dropdown-divider {
            border-color: #000; /* Color del separador en modo claro */
        }

        .dark-mode .dropdown-divider {
            border-color: #ffffff; /* Color del separador en modo oscuro */
        }

        .skiptranslate iframe { 
            opacity: 0 !important;
        }

        img[src="https://www.google.com/images/cleardot.gif"] {
            display: none;
        }

        body {
            top: 0 !important; /* el coso del traductor */
        }

        /* Estilos para centrar y ajustar el buscador */
        #search-input {
            max-width: 300px;
            margin: auto;
        }

        /* Evitar desbordamiento en el navbar */
        .navbar-collapse {
            flex-wrap: wrap;
        }

        .navbar-nav .nav-item {
            min-width: 100px; /* Ajusta este valor según sea necesario */
        }

        /* Evitar desbordamiento en botones */
        .navbar .btn-outline-dark {
            white-space: nowrap; /* Evita que el texto se desborde */
        }

        /* Espaciado consistente entre botones */
        .navbar .btn, .navbar .dropdown-toggle {
            margin: 0 5px;
        }

        /* Control de traducción */
        .goog-te-banner-frame.skiptranslate {
            display: none !important;
        }

.container {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 250px;
    background: #2d3e50;
    color: #fff;
    padding: 20px;
}

.sidebar .user-info {
    text-align: center;
    margin-bottom: 20px;
}

.sidebar .user-info img {
    width: 100px;
    border-radius: 50%;
}

.sidebar .user-info h3 {
    margin: 10px 0;
}

.sidebar .menu ul {
    list-style: none;
    padding: 0;
}

.sidebar .menu ul li {
    margin-bottom: 10px;
}

.sidebar .menu ul li a {
    color: #fff;
    text-decoration: none;
    display: block;
    padding: 10px;
    border-radius: 4px;
    background: #3e4e63;
}

.sidebar .menu ul li a.active, 
.sidebar .menu ul li a:hover {
    background: #1d2b3a;
}

.content {
    flex-grow: 1;
    padding: 20px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

table, th, td {
    border: 1px solid #ccc;
}

th, td {
    padding: 10px;
    text-align: center;
}

button {
    background: #2d3e50;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background: #1d2b3a;
}

button.edit-button {
    background: #ffc107;
}

button.edit-button:hover {
    background: #e0a800;
}

button.delete-button {
    background: #dc3545;
}

button.delete-button:hover {
    background: #c82333;
}

form {
    margin-bottom: 20px;
}

form label {
    display: block;
    margin-bottom: 5px;
}

form input, form button {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
}

.admin-results {
    display: none;
}

.results table, .internship-results table, .admin-results table {
    margin-top: 20px;
}

    </style>
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-light bg-light sticky-top navbar-main">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse flex-column flex-md-row" id="navbarTogglerDemo01">
                <a class="navbar-brand" href="../HTML/Index.html">Jobcrafters</a>
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="">Reportes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="">Perfiles</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="">Acciones de pago</a>
                    </li>
                    <li class="nav-item">
                        <!-- Formulario de búsqueda -->
                        <form class="d-flex" role="search">
                            <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Buscar" id="search-input">
                            <button class="btn btn-outline-dark" type="submit">Buscar</button>
                        </form>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <a class="btn btn-primary" type="button" href="../HTML/Registro.html">admin1</a>
                </div>
                <!-- Dropdown del ícono de usuario -->
                <div class="dropdown">
                    <button class="btn btn-white dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton1">
                        <li class="dropdown-item">
                            <div class="dropdown d-flex align-items-center">
                                <i class="bi bi-globe me-2"></i>
                                <a href="#" class="dropdown-toggle" id="idiomaDropdown"></a>  
                                <div id="google_translate_element"></div>
                                <ul class="dropdown-menu" aria-labelledby="idiomaDropdown">
                                    <li><a class="dropdown-item idioma" href="#" data-lang="en">Inglés</a></li>
                                    <li><a class="dropdown-item idioma" href="#" data-lang="de">Alemán</a></li>
                                </ul>
                            </div>
                        </li>
                        <li>
                            <a class="dropdown-item d-flex justify-content-between align-items-center" href="#">
                                <span><i class="bi bi-moon-fill me-2"></i> Fondo oscuro</span>
                                <label class="switch">
                                    <input type="checkbox" id="darkModeToggle">
                                    <span class="slider"></span>
                                </label>
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Cerrar Sesión</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <h2>Admin CRUD</h2>
<div class="admin-actions">
    <button id="view-requests" onclick="fetchRequests()">Ver Solicitudes</button>
    <button id="edit-requests">Editar Solicitudes</button>
    <button id="delete-requests">Eliminar Solicitudes</button>
</div>
<div class="admin-results" style="display:none;">
    <h3>Solicitudes para Admin</h3>
    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Correo Electrónico</th>
                <th>Teléfono</th>
                <th>Currículum</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="admin-list">
            <!-- Las solicitudes se cargarán aquí mediante JavaScript -->
        </tbody>
    </table>
</div>
   <!-- Footer Section -->
<footer class="bg-dark text-white py-4">
  <div class="container">
      <div class="row">
          <!-- Primera columna -->
          <div class="col-12 col-md-3 mb-3">
              <h5>CONOCE MÁS</h5>
              <ul class="list-unstyled">
                  <li><a href="../HTML/Index.html" class="text-white text-decoration-none">Inicio</a></li>
                  <li><a href="#" class="text-white text-decoration-none">Búsqueda de Empleos</a></li>
                  <li><a href="../HTML/directorio de oficios.html" class="text-white text-decoration-none">Directorio de oficios</a></li>
                  <li><a href="../HTML/sobreNosotros.html" class="text-white text-decoration-none">Sobre Nosotros</a></li>
                  <li><a href="../HTML/contactanos.html" class="text-white text-decoration-none">Contáctanos</a></li>
              </ul>
          </div>
          <!-- Segunda columna -->
          <div class="col-12 col-md-3 mb-3">
              <h5>Sobre Empleos</h5>
              <ul class="list-unstyled">
                  <li><a href="../HTML/directorio de oficios.html" class="text-white text-decoration-none">Directorio de oficios</a></li>
                  <li><a href="#" class="text-white text-decoration-none">Búsqueda de Empleos</a></li>
                  <li><a href="#" class="text-white text-decoration-none">Regístrate</a></li>
              </ul>
          </div>
          <!-- Tercera columna -->
          <div class="col-12 col-md-3 mb-3">
              <h5>Políticas</h5>
              <ul class="list-unstyled">
                  <li><a href="../HTML/sobreNosotros.html" class="text-white text-decoration-none">Nuestra Misión</a></li>
                  <li><a href="../HTML/sobreNosotros.html" class="text-white text-decoration-none">Nuestra Historia</a></li>
                  <li><a href="../HTML/sobreNosotros.html" class="text-white text-decoration-none">Cómo funciona</a></li>
                  <li><a href="../HTML/contactanos.html" class="text-white text-decoration-none">Contáctanos</a></li>
              </ul>
          </div>
          <!-- Cuarta columna -->
          <div class="col-12 col-md-3 mb-3 text-center text-md-start">
              <h5>Jobcrafters</h5>
              <img src="../IMG/favicon.png" alt="Logo" class="img-fluid mb-2" style="max-width: 150px;">
              <div>
                  <a href="#" class="text-white me-2"><i class="bi bi-linkedin"></i></a>
                  <a href="#" class="text-white me-2"><i class="bi bi-youtube"></i></a>
                  <a href="#" class="text-white me-2"><i class="bi bi-instagram"></i></a>
                  <a href="#" class="text-white me-2"><i class="bi bi-facebook"></i></a>
                  <a href="#" class="text-white me-2"><i class="bi bi-twitter"></i></a>
              </div>
          </div>
      </div>
      <div class="row mt-4">
          <div class="col text-center">
              <p class="mb-0">&copy; 2024 Jobcrafters.com Todos los Derechos Reservados</p>
          </div>
      </div>
  </div>
</footer>


<script src="../JS/modo noche.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <!--Start of Tawk.to Script-->
  <script type="text/javascript">
      var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
      (function(){
      var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
      s1.async=true;
      s1.src='https://embed.tawk.to/66ba5633146b7af4a4397fc9/1i53u1f03';
      s1.charset='UTF-8';
      s1.setAttribute('crossorigin','*');
      s0.parentNode.insertBefore(s1,s0);
      })();
  </script>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function () {
      let lastScrollTop = 0;
      const navbar = document.querySelector('.navbar');

      window.addEventListener('scroll', function () {
          let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

          if (scrollTop > lastScrollTop) {
              // Si el usuario hace scroll hacia abajo, escondemos el navbar
              navbar.classList.add('navbar-hidden');
          } else {
              // Si el usuario hace scroll hacia arriba, mostramos el navbar
              navbar.classList.remove('navbar-hidden');
          }

          lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // Evita valores negativos en iOS
      });

      document.getElementById('darkModeToggle').addEventListener('change', function () {
          if (this.checked) {
              document.body.classList.add('dark-mode');
              localStorage.setItem('darkMode', 'enabled');
          } else {
              document.body.classList.remove('dark-mode');
              localStorage.setItem('darkMode', 'disabled');
          }
      });

      // Cargar el estado del modo oscuro desde localStorage al cargar la página
      if (localStorage.getItem('darkMode') === 'enabled') {
          document.body.classList.add('dark-mode');
          document.getElementById('darkModeToggle').checked = true;
      } else {
          document.body.classList.remove('dark-mode');
          document.getElementById('darkModeToggle').checked = false;
      }

      document.querySelectorAll('.dropdown-item.idioma').forEach(item => {
          item.addEventListener('click', function() {
              const lang = this.getAttribute('data-lang');
              localStorage.setItem('selectedLanguage', lang); // Guarda el idioma seleccionado
              const googleFrame = document.querySelector('.goog-te-combo');
              if (googleFrame) {
                  googleFrame.value = lang;
                  googleFrame.dispatchEvent(new Event('change'));
              }
          });
      });

      // Aplicar el idioma guardado al cargar la página
      const savedLang = localStorage.getItem('selectedLanguage');
      if (savedLang) {
          setTimeout(() => {
              const googleFrame = document.querySelector('.goog-te-combo');
              if (googleFrame) {
                  googleFrame.value = savedLang;
                  googleFrame.dispatchEvent(new Event('change'));
              }
          }, 1500); // Ajusta el tiempo si es necesario
      }

      // Restablecer idioma al español
      document.getElementById('resetLanguage').addEventListener('click', function() {
          localStorage.removeItem('selectedLanguage'); // Elimina el idioma guardado
          setTimeout(() => {
              const googleFrame = document.querySelector('.goog-te-combo');
              if (googleFrame) {
                  googleFrame.value = 'es'; // Establece el idioma a español
                  googleFrame.dispatchEvent(new Event('change'));
              }
          }, 1500); // Ajusta el tiempo si es necesario
          location.reload(); // Recarga la página para aplicar cambios
      });

      // Retraso en la inicialización del traductor para asegurar que todo esté cargado
      setTimeout(() => {
          googleTranslateElementInit();
      }, 1500); // Ajusta el tiempo si es necesario
  });

  function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'es',
          includedLanguages: 'es,en,de',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
  }
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<div id="google_translate_element" style="display:none;"></div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      document.querySelectorAll('.dropdown-item.idioma').forEach(item => {
          item.addEventListener('click', function() {
              const lang = this.getAttribute('data-lang');
              localStorage.setItem('selectedLanguage', lang); // Guarda el idioma seleccionado
              const googleFrame = document.querySelector('.goog-te-combo');
              if (googleFrame) {
                  googleFrame.value = lang;
                  googleFrame.dispatchEvent(new Event('change'));
              }
          });
      });

      // Aplicar el idioma guardado al cargar la página
      const savedLang = localStorage.getItem('selectedLanguage');
      if (savedLang) {
          setTimeout(() => {
              const googleFrame = document.querySelector('.goog-te-combo');
              if (googleFrame) {
                  googleFrame.value = savedLang;
                  googleFrame.dispatchEvent(new Event('change'));
              }
          }, 0); // Ajusta el tiempo si es necesario
      }
  });
  function fetchRequests() {
    fetch('admin_crud.php?action=fetch')
        .then(response => response.json())
        .then(data => {
            const adminList = document.getElementById('admin-list');
            adminList.innerHTML = ''; // Limpiar la lista

            data.forEach(request => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${request.nombre}</td>
                    <td>${request.email}</td>
                    <td>${request.telefono}</td>
                    <td>${request.curriculum}</td>
                    <td>
                        <button onclick="editRequest(${request.id})">Editar</button>
                        <button onclick="deleteRequest(${request.id})">Eliminar</button>
                    </td>
                `;
                adminList.appendChild(row);
            });

            document.querySelector('.admin-results').style.display = 'block';
        });
}

function editRequest(id) {
    const nombre = prompt('Ingrese el nuevo nombre:');
    const email = prompt('Ingrese el nuevo correo electrónico:');
    const telefono = prompt('Ingrese el nuevo teléfono:');
    const curriculum = prompt('Ingrese el nuevo curriculum:');

    const formData = new FormData();
    formData.append('id', id);
    formData.append('nombre', nombre);
    formData.append('email', email);
    formData.append('telefono', telefono);
    formData.append('curriculum', curriculum);

    fetch('admin_crud.php?action=update', {
        method: 'POST',
        body: formData
    }).then(response => fetchRequests());
}

function deleteRequest(id) {
    if (confirm('¿Estás seguro de que deseas eliminar esta solicitud?')) {
        const formData = new FormData();
        formData.append('id', id);

        fetch('admin_crud.php?action=delete', {
            method: 'POST',
            body: formData
        }).then(response => fetchRequests());
    }
}
</script>

</body>
</html>
    